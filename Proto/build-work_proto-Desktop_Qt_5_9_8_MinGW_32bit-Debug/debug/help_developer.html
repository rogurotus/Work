<!DOCTYPE HTML>
<html>
	<head>
		<title>Справка программиста</title>
		<meta charset="UTF-8">
	</head>

	<body>
		<h1>Справка программиста</h1>

		<ul>
			<li> <a href = "#one">Введение</a></li>
			<li> <a href = "#two">Структура приложения</a>
				 <ul>
					<li> <a href = "#four">Диаграмма классов</a></li>
					<li> <a href = "#five">Описание классов</a></li>
					<li> <a href = "#six">Описание интерфейса</a></li>
		         </ul>
			</li>
			<li> <a href = "#three">Структура базы данных</a></li>
		</ul>

		<h2 id = "one">Введение</h2>
		<p>Программа написана на языке C++ в среде разработки QT Creator версии 5.9.8 и выше. Разработка программы происходила на операционных системах Windows 7 и Windows 8.</p>

		<h2 id = "two">Структура приложения</h2>

		<h3 id = "four">Диаграмма классов</h3>
		<p>Взаимодействие классов программы представлено на диаграмме классов:</p>
		<img src="img_developer/class.jpg">
		
		<h3 id = "five">Описание классов</h3>

		<h4>DB</h4>
		<p>Класс DB состоит из следующих файлов: DB.h и DB.cpp. В классе DB присутствуют три класса: DB, Login и Citizen.</p>

		<p>Класс DB содержит:</p>
		<ul>
			<li>Конструктор.</li>
			<li>Деструктор.</li>
			<li>Публичное статическое поле login типа Login.</li>
			<li>Приватное статическое поле *_db типа QSqlDatabase.</li>
			<li>Приватное поле *db типа QSqlDatabase.</li>
		</ul>
		<p>Конструктор проверяет наличие соединения в статическом поле. При отсутствии соединения он создает его и передает нестатическому полю. Иначе он сразу передает соединение нестатическому полю.</p>
		<p>Деструктор удаляет память, выделенную под поле db.</p>

		<p>Класс Login содержит:</p>
		<ul>
			<li>Конструктор.</li>
			<li>Конструктор с параметрами login и pass типа QString.</li>
			<li>Деструктор.</li>
			<li>Приватное поле id типа int.</li>
			<li>Приватное поле dormitory типа int.</li>
			<li>Приватное поле address типа QString.</li>
			<li>Приватное поле name типа QString.</li>
			<li>Приватное поле surname типа QString.</li>
			<li>Приватное поле patronymic типа QString.</li>
			<li>Приватный статический метод check_login_pass типа bool с параметрами login и pass типа QString.</li>
			<li>Приватный метод get_id типа int.</li>
			<li>Приватный метод get_id_dormitory типа int.</li>
		</ul>
		<p>Конструктор инициализирует поле name значением "Гость".</p>
		<p>Конструктор с параметрами login и pass типа QString инициализирует поля id, name, surname, patronymic, dormitory, address данными из базы данных путем SQL запроса.</p>
		<p>Метод get_id возвращает значение поля id.</p>
		<p>Метод get_id_dormitory возвращает значение поля dormitory.</p>

		<p>Класс Citizen содержит:</p>
		<ul>
			<li>Конструктор с параметром id типа int.</li>
			<li>Деструктор.</li>
			<li>Публичное поле id типа int.</li>
			<li>Публичное поле name типа QString.</li>
			<li>Публичное поле surname типа QString.</li>
			<li>Публичное поле patronymic типа QString.</li>
			<li>Публичное поле status типа bool.</li>
			<li>Публичное поле position типа QString.</li>
			<li>Публичное поле in_date типа QString.</li>
			<li>Публичное поле out_date типа QString.</li>
			<li>Публичное поле telephone типа QString.</li>
			<li>Публичное поле mail типа QString.</li>
			<li>Публичное поле room типа int.</li>
			<li>Публичный статический метод search типа QList<Citizen> с параметрами name, surname и patronymic типа QString.</li>
			<li>Публичный статический метод get_cojitel типа QSqlQueryModel* с параметрами citizens типа QList<Citizen> и parent типа QWidget*.</li>
		</ul>
		<p>Конструктор с параметром id типа int инициализирует поля id, name, surname, patronymic, status, position, in_date, out_date, telephone, mail, room значениями из базы данных путем SQL запроса.</p>
		<p>Метод search принимает значения полей name, surname, patronymic и ищет совпадения в базе данных. После он возвращает список типа Citizen с результатом.</p>
		<p>Метод get_cojitel принимает список значений Citizen из метода search и ищет сожителей лиц, представленных в списке. Он возвращает значение типа QSqlQueryModel*, которое можно вывести в таблицу.</p>

		<h4>MainComendant</h4>
		<ul>
			<li>Конструктор.</li>
			<li>Деструктор.</li>
			<li>Приватное поле *redactData типа RedactData.</li>
			<li>Приватное поле *view типа View.</li>
			<li>Приватное поле *seekByName типа SeekByName.</li>
			<li>Приватное поле *manageDatabase типа ManageDatabase.</li>
			<li>Публичный метод update без значения с аргументом типа bool.</li>
			<li>Приватный метод on_action_triggered без значения.</li>
			<li>Приватный метод on_action_2_triggered без значения.</li>
			<li>Приватный метод on_action_3_triggered без значения.</li>
			<li>Приватный метод on_action_4_triggered без значения.</li>
			<li>Приватный метод on_action_5_triggered без значения.</li>
			<li>Приватный метод on_action_6_triggered без значения.</li>
			<li>Приватный метод on_action_7_triggered без значения.</li>
			<li>Приватный метод on_action_8_triggered без значения.</li>
			<li>Приватный метод on_action_9_triggered без значения.</li>
			<li>Приватный метод on_pushButton_clicked без значения.</li>
		</ul>
		<p>Конструктор устанавливает строку состояния, валидаторы на форму, а также заполняет форму значениями.</p>
		<p>Метод update обновляет значения в форме после редактирования.</p>
		<p>Метод on_action_triggered при выборе пункта меню "Добавить информацию о заселенных лицах" совершает SQL запрос в базу данных, создает объект manageDatabase, заполняет его данными и открывает его.</p>
		<p>Метод on_action_2_triggered при выборе пункта меню "Изменить информацию о выселенных лицах" совершает SQL запрос в базу данных, создает объект manageDatabase, заполняет его данными и открывает его.</p>
		<p>Метод on_action_3_triggered при выборе пункта меню "Получить список свободных мест" совершает SQL запрос в базу данных, создает объект view, заполняет его данными и открывает его.</p>
		<p>Метод on_action_4_triggered при выборе пункта меню "Получить список свободных комнат" совершает SQL запрос в базу данных, создает view, заполняет его данными и открывает его.</p>
		<p>Метод on_action_5_triggered при выборе пункта меню "Получить информацию о комнате" создает объект seekByName и открывает его.</p>
		<p>Метод on_action_6_triggered при выборе пункта меню "Получить список проживающих" совершает SQL запрос в базу данных, создает объект view, заполняет его данными и открывает его.</p>
		<p>Метод on_action_7_triggered при выборе пункта меню "Получить список заявок" создает объект requests и открывает его.</p>
		<p>Метод on_action_8_triggered при выборе пункта меню "Справка пользователя" открывает html документ help_user.html.</p>
		<p>Метод on_action_9_triggered при выборе пункта меню "Справка разработчика" открывает html документ help_developer.html.</p>
		<p>Метод on_pushButton_clicked запускается при клике на pushButton. Данный метод создает объект redactData, связывает его сигнал redacted к методу update в MainComendant, и открывает его.</p>
		
		<h4>MainVisiter</h4>
		<ul>
			<li>Конструктор.</li>
			<li>Деструктор.</li>
			<li>Приватное поле *makeRequest типа MakeRequest.</li>
			<li>Приватный метод on_pushButton_clicked без значения.</li>
		</ul>
		<p>Конструктор задает строку состояния и записывает данные в форму путем нескольких SQL запросов.</p>
		<p>Метод on_pushButton_clicked создает и открывает объект makeRequest.</p>
		
		<h4>MainWindow</h4>
		<ul>
			<li>Конструктор.</li>
			<li>Деструктор.</li>
			<li>Приватное поле *mainvisiter типа MainVisiter.</li>
			<li>Приватное поле *maincomendant типа MainComendant.</li>
			<li>Приватный метод on_pushButton_2_clicked без значения.</li>
			<li>Приватный метод on_pushButton_clicked без значения.</li>
		</ul>
		<p>Конструктор устанавливает режим пароля на элемент ввода пароля</p>
		<p>Метод on_pushButton_2_clicked запускается при клике на pushButton_2 и создает объект mainvisiter, открывает его и после закрывает текущее окно.</p>
		<p>Метод on_pushButton_clicked проверяет форму на предмет заполнения всех полей, после чего делает запрос в базу данных и ищет в ней введенные логин и пароль. В случае успеха создается и открывается объект maincomendant, а текущее окно закрывается.</p>
		
		<h4>MakeRequest</h4>
		<ul>
			<li>Конструктор.</li>
			<li>Деструктор.</li>
			<li>Приватный метод on_pushButton_clicked без значения.</li>
		</ul>
		<p>Конструктор устанавливает маски ввода и валидаторы на форму.</p>
		<p>Метод on_pushButton_clicked проверяет форму на предмет полноты введенных данных, после проверяет их корректность. В случае успеха данные записываются в базу данных и выдается сообщение об успехе. Иначе выдаются сообщения о проблемах.</p>
		
		<h4>ManageDatabase</h4>
		<ul>
			<li>Конструктор.</li>
			<li>Деструктор.</li>
			<li>Приватное поле *model типа QSqlQueryModel.</li>
			<li>Приватное поле *redactHuman типа RedactHuman.</li>
			<li>Приватное поле old типа bool.</li>
			<li>Приватный метод on_redact_button_clicked без значения.</li>
			<li>Публичный метод update_human без значения с аргументом типа bool.</li>
			<li>Публичный метод setTitle без значения с аргументом типа QString.</li>
			<li>Публичный метод set_model без значения с аргументом типа QSqlQueryModel.</li>
		</ul>
		<p>Конструктор инициализирует поле old.</p>
		<p>Метод on_redact_button_clicked создает объект redactHuman, связывает сигнал redactHuman redacted_human типа bool с методом update_human объекта manageDatabase, после чего открывает объект redactHuman.</p>
		<p>Метод update_human с аргументом типа bool ловит сигнал redacted_human типа bool и обновляет данные в форме путем совершения SQL запроса.</p>
		<p>Метод setTitle получает значение из MainComendant и задает строку состояния.</p>
		<p>Метод set_model объект типа QSqlQueryModel и задает его таблице.</p>
		
		<h4>RedactData</h4>
		<ul>
			<li>Конструктор.</li>
			<li>Деструктор.</li>
			<li>Сигнал redacted без значения с аргументом типа bool.</li>
			<li>Приватный метод on_pushButton_clicked без значения.</li>
			<li>Приватный метод on_pushButton_2_clicked без значения.</li>
		</ul>
		<p>Конструктор устанавливает валидаторы на компоненты формы и заполняет их данными из базы данных.</p>
		<p>Метод on_pushButton_clicked запускается при клике на кнопку pushButton. Метод проверяет корректность входных данных и в случае успеха записывает данные в базу данных.</p>
		<p>Метод on_pushButton_2_clicked запускается при клике на кнопку pushButton_2 и закрывает текущее окно.</p>
		
		<h4>RedactHuman</h4>
		<ul>
			<li>Конструктор.</li>
			<li>Деструктор.</li>
			<li>Приватное поле citizen_id типа int.</li>
			<li>Приватное поле old типа bool.</li>
			<li>Сигнал redacted_human без значения с аргументом типа bool.</li>
			<li>Приватный метод on_redacted_clicked без значения.</li>
			<li>Приватный метод isData типа bool с аргументом типа QString.</li>
			<li>Приватный метод on_building_combobox_currentIndexChanged без значения с аргументом типа int.</li>
		</ul>
		<p>Конструктор устанавливает валидаторы на компоненты формы и заполняет их данными из базы данных.</p>
		<p>Метод on_redacted_clicked запускается при клике на кнопку redacted и проверяет входные данные на корректность и в случае успеха записывает данные в базу данных.</p>
		<p>Метод isData проверяет корректность введенной даты.</p>
		<p>Метод on_building_combobox_currentIndexChanged заполняет данными элемент формы ComboBox.</p>
		
		<h4>Requests</h4>
		<ul>
			<li>Конструктор.</li>
			<li>Деструктор.</li>
			<li>Публичный метод setTitle без значения с аргументом типа QString.</li>
		</ul>
		<p>Конструктор считывает данные из базы данных путем SQL запроса и выводит в таблицу.</p>
		<p>Метод setTitle получает значение из MainComendant и задает строку состояния.</p>

		<h4>SeekByName</h4>
		<ul>
			<li>Конструктор.</li>
			<li>Деструктор.</li>
			<li>Публичный метод setTitle без значения с аргументом типа QString.</li>
			<li>Приватный метод on_Enter_FIO_clicked без значения.</li>
		</ul>
		<p>Конструктор устанавливает валидаторы на элементы формы.</p>
		<p>Метод setTitle получает значение из MainComendant и задает строку состояния.</p>
		<p>Метод on_Enter_FIO_clicked запускается при клике на кнопку Enter_FIO и запускает метод search класса Citizen, после запускает метод get_cojitel класса Citizen.</p>
		
		<h4>View</h4>
		<ul>
			<li>Конструктор.</li>
			<li>Деструктор.</li>
			<li>Публичный метод setTitle без значения с аргументом типа QString.</li>
			<li>Публичный метод set_model без значения с аргументом типа QSqlQueryModel.</li>
		</ul>
		<p>Метод setTitle получает значение из MainComendant и задает строку состояния.</p>
		<p>Метод set_model принимает объект типа QSqlQueryModel и задает его таблице.</p>

		<h3 id = "six">Описание интерфейса</h3>
		<h4>MainComendant</h4>
		<p>Форма maincomendant.ui содержит следующие элементы:</p>
		<ul>
			<li>dormitory_groupbox - содержит элементы и выводит номер общежития.</li>
			<li>address_label - выводит адрес общежития.</li>
			<li>comendant_label - выводит ФИО коменданта общежития.</li>
			<li>building_1_label - выводит номер первого корпуса.</li>
			<li>room_amount_1_label - выводит количество комнат в первом корпусе.</li>
			<li>place_amount_1_label - выводит количество мест в комнатах первого корпуса.</li>
			<li>building_2_label - выводит номер второго корпуса.</li>
			<li>room_amount_2_label - выводит количество комнат во втором корпусе.</li>
			<li>place_amount_2_label - выводит количество мест в комнатах второго корпуса.</li>
			<li>pushButton - открывает окно redactdata.ui.</li>
			<li>state_label - строка состояния.</li>
		</ul>

		<h4>MainVisiter</h4>
		<p>Форма mainvisiter.ui содержит следующие элементы:</p>
		<ul>
			<li>dormitory1_groupbox - содержит элементы и выводит номер первого общежития.</li>
			<li>address1_label - выводит адрес первого общежития.</li>
			<li>comendant1_label - выводит ФИО коменданта первого общежития.</li>
			<li>building11_label - выводит номер первого корпуса первого общежития</li>
			<li>room_amount11_label - выводит количество свободных комнат первого корпуса первого общежития.</li>
			<li>building12_label - выводит номер второго корпуса первого общежития.</li>
			<li>room_amount12_label - выводит количество свободных комнат второго корпуса первого общежития.</li>
			<li>dormitory2_groupbox - содержит элементы и выводит номер второго общежития.</li>
			<li>address2_label - выводит адрес второго общежития.</li>
			<li>comendant2_label - выводит ФИО коменданта второго общежития.</li>
			<li>building21_label - выводит номер первого корпуса второго общежития</li>
			<li>room_amount21_label - выводит количество свободных комнат первого корпуса второго общежития.</li>
			<li>building22_label - выводит номер второго корпуса второго общежития.</li>
			<li>room_amount22_label - выводит количество свободных комнат второго корпуса второго общежития.</li>
			<li>pushButton - открывает окно makerequest.ui.</li>
			<li>state_label - строка состояния.</li>
		</ul>
		
		<h4>MainWindow</h4>
		<p>Форма mainwindow.ui содержит следующие элементы:</p>
		<ul>
			<li>login_label - выводит текст "Введите логин".</li>
			<li>login_edit - элемент для ввода логина.</li>
			<li>password_label - выводит текст "Введите пароль".</li>
			<li>password_edit - элемент для ввода пароля.</li>
			<li>pushButton - открывает окно maincomendant.ui.</li>
			<li>pushButton_2 - открывает окно mainvisiter.ui.</li>
		</ul>
		
		<h4>MakeRequest</h4>
		<p>Форма makerequest.ui содержит следующие элементы:</p>
		<ul>
			<li>surname_label - выводит текст "Введите фамилию".</li>
			<li>surname_edit - элемент для ввода фамилии.</li>
			<li>name_label - выводит текст "Введите имя".</li>
			<li>name_edit - элемент для ввода имени.</li>
			<li>patronymic_label - выводит текст "Введите отчество (при отсутствии можно опустить)".</li>
			<li>patronymic_edit - элемент для ввода отчества.</li>
			<li>status_groupbox - группирующий элемент, выводит текст "Вы студент или сотрудник?".</li>
			<li>student_radio - элемент выбора опции "Студент".</li>
			<li>sotrudnik_radio - элемент выбора опции "Сотрудник".</li>
			<li>group_work_label - выводит текст "Если вы студент, укажите вашу группу. Если вы сотрудник, укажите вашу должность.".</li>
			<li>group_work_edit - элемент для ввода статуса.</li>
			<li>phone_label - выводит текст "Укажите ваш номер телефона".</li>
			<li>phone_edit - элемент для ввода телефона.</li>
			<li>mail_label - выводит текст "Укажите ваш адрес элемтронной почты".</li>
			<li>mail_edit - элемент для ввода электронной почты.</li>
			<li>pushButton - запускает редактирование данных.</li>
		</ul>
		
		<h4>ManageDatabase</h4>
		<p>Форма managedatabase.ui содержит следующие элементы:</p>
		<ul>
			<li>tableView - таблица для вывода данных.</li>
			<li>redact_button - запускает редактирование данных.</li>
			<li>state_label - строка состояния.</li>
		</ul>
		
		<h4>RedactData</h4>
		<p>Форма redactdata.ui содержит следующие элементы:</p>
		<ul>
			<li>address_label - выводит текст "Введите адрес общежития".</li>
			<li>address_edit - элемент для ввода адреса.</li>
			<li>surname_label - выводит текст "Введите фамилию коменданта".</li>
			<li>surname_edit - элемент для ввода фамилии.</li>
			<li>name_label - выводит текст "Введите имя коменданта".</li>
			<li>name_edit - элемент для ввода имени.</li>
			<li>patronymic_label - выводит текст "Введите отчество коменданта (необязательное поле)".</li>
			<li>patronymic_edit - элемент для ввода отчества.</li>
			<li>building1_label - выводит текст "Корпус № 0".</li>
			<li>room_amount1_label - выводит текст "Введите количество комнат".</li>
			<li>room_amount1_edit - элемент для ввода количества комнат.</li>
			<li>place_amount1_label - выводит текст "Введите количество мест в комнате".</li>
			<li>place_amount1_spinbox - элемент для ввода количества мест в комнате.</li>
			<li>building2_label - выводит текст "Корпус № 0".</li>
			<li>room_amount2_label - выводит текст "Введите количество комнат".</li>
			<li>room_amount2_edit - элемент для ввода количества комнат.</li>
			<li>place_amount2_label - выводит текст "Введите количество мест в комнате".</li>
			<li>place_amount2_spinbox - элемент для ввода количества мест в комнатах.</li>
			<li>pushButton - при клике принимает изменения.</li>
			<li>pushButton_2 - отмена.</li>
		</ul>
		
		<h4>RedactHuman</h4>
		<p>Форма redactdata.ui содержит следующие элементы:</p>
		<ul>
			<li>surname_label - выводит текст "Фамилия".</li>
			<li>name_label - выводит текст "Имя".</li>
			<li>patronymic_label - выводит текст "Отчество".</li>
			<li>status_label - выводит текст "Статус".</li>
			<li>status_edit - элемент для ввода статуса.</li>
			<li>data_in_label - выводит текст "Дата заселения".</li>
			<li>data_out_label - выводит текст "Дата выселения".</li>
			<li>data_out_edit - элемент для ввода даты.</li>
			<li>building_number_label - выводит текст "Номер корпуса".</li>
			<li>building_comboboxl - элемент для ввода номера корпуса.</li>
			<li>room_number_label - выводит текст "Номер комнаты".</li>
			<li>room_combobox - элемент для ввода номера комнаты.</li>
			<li>phine_label - выводит текст "Номер телефона".</li>
			<li>phone_edit - элемент для ввода номера телефона.</li>
			<li>mail_label - выводит текст "Электронная почта".</li>
			<li>mail_edit - элемент для ввода элеатронной почты.</li>
			<li>redacted - кнопка. Запускает метод редактирования.</li>
		</ul>
		
		<h4>Requests</h4>
		<p>Форма requests.ui содержит следующие элементы:</p>
		<ul>
			<li>tableViewl - таблица для вывода данных.</li>
			<li>state_label - строка состояния.</li>
		</ul>
		
		<h4>SeekByName</h4>
		<p>Форма seekbyname.ui содержит следующие элементы:</p>
		<ul>
			<li>surname_label - выводит текст "Введите фамилию".</li>
			<li>name_label - выводит текст "Введите имя".</li>
			<li>patronymic_label - выводит текст "Введите отчество".</li>
			<li>surname_edit - элемент для ввода фамилии.</li>
			<li>name_edit - элемент для ввода имени.</li>
			<li>patronymic_edit - элемент для ввода отчества.</li>
			<li>Enter_FIO - кнопка для ввода данных.</li>
			<li>tableView - таблица для вывода данных.</li>
			<li>state_label - строка состояния.</li>
		</ul>
		
		<h4>View</h4>
		<p>Форма view.ui содержит следующие элементы:</p>
		<ul>
			<li>tableView - таблица для вывода данных.</li>
			<li>state_label - строка состояния.</li>
		</ul>
		
		<h2 id = "three">Структура базы данных</h2>
		<p>В качестве базы данных приложения была использована база данных SQLite 3 версии. Структура базы данных представлена на диаграмме:</p>
		<img = src="img_developer/db.png">

	</body>
</html>